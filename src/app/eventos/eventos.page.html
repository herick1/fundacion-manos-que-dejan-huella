<ion-header>
  <nav class="navbar navbar-expand-lg bg-warning">
    <div class="container">
      <a class="navbar-brand">
        <button class="navbar-toggler ion-icon-nav" type="button" (click)="toggleMenu()">
          <ion-icon name="menu"></ion-icon>
        </button>
        <a [routerLinkActive]="['router-link-active']" [routerLink]="['/es/home']">Manos que dejan huellas </a>
      </a>
      <div class="collapse navbar-collapse" id="navbar-menu">
        <ul class="navbar-nav">
          <li class="nav-item">
            <div ngbDropdown class="d-inline-block dropdown">
              <a class="nav-link" id="dropdownBasic1" ngbDropdownToggle>¿Quienes somos?</a>
              <div ngbDropdownMenu aria-labelledby="dropdownBasic1" class="dropdown-primary">
                <a class="dropdown-item" href="es/quienes-somos#mision">Misión</a>
                <a class="dropdown-item" href="es/quienes-somos#vision">Visión</a>
                <a class="dropdown-item" href="es/quienes-somos#valores">Valores</a>
                <a class="dropdown-item" href="es/quienes-somos#objetivos">Objetivos
                </a>
                <a class="dropdown-item" href="es/quienes-somos#historia">Historia
                </a>
              </div>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" [routerLinkActive]="['router-link-active']" [routerLink]="['/es/publicaciones']">Publicaciones</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" [routerLinkActive]="['router-link-active']" [routerLink]="['/es/contactanos']" >Contactanos</a>
          </li>
          <li class="nav-item">
            <div *ngIf="prueba==true">
              <a class="nav-link" [routerLinkActive]="['router-link-active']" [routerLink]="['/es/usuario']" >Usuario</a>
            </div>
          </li>
          <li class="nav-item">
            <div *ngIf="prueba==true">
              <a class="nav-link" [routerLinkActive]="['router-link-active']" [routerLink]="['/es/dashboardEstadisticas']" >Estadisticas</a>
            </div>
          </li>
          <li class="nav-item">
            <div *ngIf="prueba==true">
              <a class="nav-link" [routerLinkActive]="['router-link-active']" [routerLink]="['/es/eventos']" >Eventos</a>
            </div>
          </li>
        </ul>
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="https://www.facebook.com/Dejatuhuella777">
              <ion-icon name="logo-facebook" aria-hidden="true"></ion-icon>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/dejatushuellas">
              <ion-icon name="logo-twitter" aria-hidden="true"></ion-icon>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://www.instagram.com/dejatushuellas">
              <ion-icon name="logo-instagram" aria-hidden="true"></ion-icon>
            </a>
          </li>
          <li class="nav-item" >
            <a class="navbar-brand"  [routerLinkActive]="['router-link-active']" [routerLink]="['/es/login']" *ngIf="prueba==false">Entrar</a>
            <a class="navbar-brand" (click)="logout()" *ngIf="prueba==true">Salir</a>

          </li>
        </ul>
      </div>

    </div>
  </nav>
</ion-header>

<ion-content>
  <div>
    <h1 class="h2">&nbsp;Eventos</h1>
  </div>
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <div class="col-lg" style="text-align: center;">
      <div class="input-group">
        <input type="text" class="form-control" id="texto" placeholder="Buscar por..." (keyup)="showSearchResults($event)" >
        <div class="input-group-append"><span class="btn-warning" style="padding-left: 4px;
        padding-right: 4px; border-top-right-radius: 15px; border-bottom-right-radius: 15px; padding-top: 3px;">
    <ion-icon ios="ios-search" md="md-search"></ion-icon></span></div>
      </div>
    </div>
    <div class="btn-toolbar mb-2 mb-md-0">
      <div class="btn-group mr-2">
        <button class="btn btn-outline-warning ml-4" (click)="crearEvento()">
          Crear un evento
        </button>
      </div>
    </div>
    <div class="btn-toolbar mb-2 mb-md-0">
      <div class="btn-group mr-2">
        <button class="btn btn-outline-warning ml-4" (click)="enviarNotificaciones()">
          Enviar notificaciones
        </button>
      </div>
    </div>
  </div>

  <div class="col-md" style="  text-align: center;">
    <!-- START USERS ACTIVITY BLOCK -->
    <div class="panel panel-default">
      <div class="panel-heading">
        <div class="panel-title-box" style="  text-align: left;">
          <h3>Tabla con los eventos del  sistema</h3>
          <span>Aqui se puede crear, actualizar y eliminar los eventos del sistema</span>
        </div>                                      
      </div>                                
      <div class="panel-body padding-0">
        <div class="row stacked" style="background: white">
          <div class="col">
            <div class="banner_content">
             <div id="contenedor">
               <div class="table-responsive">
                 <table class="table table-striped table-sm">
                   <thead style="  text-align: center;">
                     <tr>
                       <th *ngFor="let item of headerEventos; let indice=index">
                        <span>
                          {{item }}
                        </span>
                      </th>
                      <th>
                        <span>
                          Acciones
                        </span>
                      </th>
                    </tr>
                  </thead>
                  <tbody style="  text-align: center;">
                   <tr *ngFor="let evento of eventos; let indice=index">
                    <td *ngFor="let itemsito of evento; let indice2=index" >
                      <a title="Ver detalles" href="/es/eventos#" style="color:black;" (click)="verEvento(evento[0])" >
                        {{itemsito }}
                      </a>
                    </td>
                    <td>
                     <button class="btn btn-outline-warning" type="button" (click)="actualizarEvento(evento[0])">Actualizar
                     </button>
                     <button class="btn btn-outline-danger"  type="button" (click)="eliminarEvento(evento[0])" data-toggle="modal" data-target="#eliminarModal">Eliminar
                     </button>
                   </td>
                 </tr>
               </tbody>
             </table>
           </div>
         </div>
       </div>
     </div>      
     <div class="col-md-4">
      <img class="img-fluid" src="assets/img/fundacion.png" alt="">
    </div>
  </div>    
</div>                                   
</div>
</div>


<!--MODALESS-->
<ng-template #modalEliminar let-modal >
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLongTitle">Eliminar evento</h5>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
   ¿Estas seguro de eliminar este evento?
 </div>
 <div class="modal-footer padding-foter">
   <!--button class="btn btn-danger" type="submit" (click)="modal.close('Save click')">Eliminar</button-->
   <button class="btn btn-danger" type="submit" (click)="eliminar()">Eliminar</button>        
   <button type="button" class="btn btn-default" (click)="modal.dismiss('Cross click')">Cerrar</button>
 </div>
</ng-template> 


<ng-template #modalActualizar let-modal >
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLongTitle">Actualizar evento</h5>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <label><b>Nombre:&nbsp;</b></label>
      <input #nombre [(ngModel)]="nombreSelecionado" type="text" class="form-control input-lg" placeholder="" >
    </div>
    <div class="form-group">
      <label><b>Fecha inicio:&nbsp;</b></label>
      <input #fechaIni  [(ngModel)]="fechainicioSeleccionado" type="date" class="form-control input-lg" placeholder="" >
    </div>
    <div class="form-group">  
      <label><b>Fecha fin:&nbsp;</b></label>
      <input #fechaFin [(ngModel)]="fechaFinSeleccionado"  type="date" class="form-control input-lg" placeholder="" >
    </div>
    <div class="form-group">  
      <label><b>Dirección:&nbsp;</b></label>
      <input #direccion [(ngModel)]="direccionSeleccionado"  type="text" class="form-control input-lg" placeholder="" >
    </div>
    <div class="form-group">  
      <label><b>Descripción:&nbsp;</b></label>
      <input #descripcion [(ngModel)]="descripcionSeleccionado"  type="text" class="form-control input-lg" placeholder="" >
    </div>
    <div class="form-group">
      <label><b>Imagen:&nbsp;</b> {{nombreImagenSeleccionado}} </label>
    </div>
    <div class="form-group">
      <input #imagen type="button" name="foo" type="file"  (change)="onFileChange($event)">
    </div>
  </div>
  <div class="modal-footer padding-foter">
   <button class="btn btn-danger" type="submit" (click)="confirmarActualizar(nombre.value, fechaIni.value, fechaFin.value, direccion.value, descripcion.value)">Actualizar</button>    
   <button type="button" class="btn btn-default" (click)="modal.dismiss('Cross click')">Cerrar</button>
 </div>
</ng-template> 

<ng-template #modalConfirmarActualizar let-modal >
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLongTitle">Confirmar actualizar evento</h5>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
   ¿Estas seguro de actualizar este evento?
 </div>
 <div class="modal-footer padding-foter">
   <button class="btn btn-outline-warning" type="submit" (click)="Actualizar()">Confirmar</button>    
   <button type="button" class="btn btn-default" (click)="modal.dismiss('Cross click')">Cerrar</button>
 </div>
</ng-template> 


<ng-template #modalVer let-modal >
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLongTitle">Detalles del evento</h5>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <strong>Nombre(s):&nbsp;</strong> <i>{{nombreSelecionado}}</i><br>
    <strong>Fecha inicio: &nbsp;</strong> <i>{{fechainicioSeleccionado}}</i><br>
    <strong>Fecha fin:&nbsp;</strong> <i>{{fechaFinSeleccionado}}</i><br>
    <strong>Dirección: &nbsp;</strong> <i>{{direccionSeleccionado }}</i><br>
    <strong>Descripción: &nbsp;</strong> <i>{{descripcionSeleccionado }}</i><br>
    <strong>Imagen: &nbsp;</strong>
    <div>
      <img  src="{{urlImagenSeleccionado}}">
    </div>
    <br>
    <br>
  </div>
  <div class="modal-footer padding-foter">   
    <button type="button" class="btn btn-outline-warning" (click)="modal.close('Save click')">Cerrar</button>
  </div>
</ng-template> 


<ng-template #modalCrear let-modal >
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLongTitle">Creación de eventos</h5>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <label><b>Nombre</b></label>     
      <input #nombre  type="text" class="form-control input-lg" placeholder="Ingrese el nombre del evento..." >
    </div>
    <div class="form-group">
      <label><b>Fecha inicio</b></label>
      <input #fecha_inicio value="" type="date" class="form-control input-lg" placeholder="Ingrese la fecha de inicio..." >
    </div>
    <div class="form-group">  
      <label><b>Fecha fin</b></label>
      <input #fecha_fin value=""  type="date" class="form-control input-lg" placeholder=" Ingrese la fecha fin..." >
    </div>
    <div class="form-group">  
      <label><b>Dirección</b></label>
      <input #direccion value=""  type="text" class="form-control input-lg" placeholder="Ingrese la dirección..." >
    </div>
    <div class="form-group">  
      <label><b>Descripción</b></label>
      <input #descripcion value=""  type="text" class="form-control input-lg" placeholder=" Ingrese la descripción..." >
    </div>
    <div class="form-group">  
      <label><b>Imagen</b></label>
      <input #imagen type="button" name="foo" type="file"  (change)="onFileChange($event)">
    </div>

  </div>
  <div class="modal-footer padding-foter">
   <button class="btn btn-danger" type="submit" (click)="confirmarCrear(nombre.value, fecha_inicio.value, fecha_fin.value, direccion.value, descripcion.value)">Crear</button>    
   <button type="button" class="btn btn-default" (click)="modal.dismiss('Cross click')">Cerrar</button>
 </div>
</ng-template> 

<ng-template #modalConfirmarCrear let-modal >
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLongTitle">Confirmar crear evento</h5>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
   ¿Estas seguro de crear este evento?
 </div>
 <div class="modal-footer padding-foter">
   <button class="btn btn-outline-warning" type="submit" (click)="Crear()">Confirmar</button>    
   <button type="button" class="btn btn-default" (click)="modal.dismiss('Cross click')">Cerrar</button>
 </div>
</ng-template> 

<ng-template #modalFracaso let-modal >
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLongTitle">Ups ocurrieron algunos errores</h5>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body modal-centered">
    <div align="center">
      <div *ngFor="let item of errores; let indice=index"  class="alert alert-danger">
        <strong>Oh!</strong> {{item}}
      </div>
    </div>
  </div>
  <div class="modal-footer padding-foter">  
    <button type="button" class="btn btn-default" (click)="modal.dismiss('Cross click')">Cerrar</button>
  </div>
</ng-template>

<ng-template #modalExito let-modal >
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLongTitle">Exito en la transacción</h5>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body modal-centered">
    <div align="center">
      La transacción se ha realizado con exito
      <br>
      <img  src="assets/gif/check_animado_correcto.gif"  style="max-height: 200px">
    </div>
  </div>
  <div class="modal-footer padding-foter">
    <button class="btn btn-outline-success" type="submit" (click)="modal.dismiss('Cross click')"> Aceptar</button>    
    <button type="button" class="btn btn-outline-warning" (click)="modal.dismiss('Cross click')">Cerrar</button>
  </div>
</ng-template>

<ng-template #modalNotificaciones let-modal >
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLongTitle">Enviar notificaciones push</h5>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body modal-centered">
    <div align="center">
      La notificación se enviará a {{cantidadDispositivos}} dispositivos 
    </div>
    <br>
    <div class="form-group">  
      <label><b>Titulo</b></label>
      <input #titulo value=""  type="text" class="form-control input-lg" placeholder="Ingrese el titulo" >
    </div>
    <div class="form-group">  
      <label><b>Mensaje</b></label>
      <input #mensaje value=""  type="text" class="form-control input-lg" placeholder=" Ingrese el mensaje" >
    </div>
  </div>
  <div class="modal-footer padding-foter">
    <button class="btn btn-outline-success" type="submit" (click)="ConfirmarenviarNotificacion()"> Enviar</button>    
    <button type="button" class="btn btn-outline-warning" (click)="modal.dismiss('Cross click')">Cerrar</button>
  </div>
</ng-template>

<ng-template #modalConfirmarNotificacion let-modal >
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLongTitle">Confirmar envió de notificación</h5>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
   ¿Estas seguro de enviar está notificación?
 </div>
 <div class="modal-footer padding-foter">
   <button class="btn btn-outline-warning" type="submit" (click)="Enviar()">Confirmar</button>    
   <button type="button" class="btn btn-default" (click)="modal.dismiss('Cross click')">Cerrar</button>
 </div>
</ng-template> 


</ion-content>
